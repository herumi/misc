# εγΚε¤£εβ¤εγ«εβ·εβΉεγ¬ε¦Άεγ©εβ¤εγΜε¦«εγ

## ιο¤ι©

* [filesystem-ts](https://github.com/cplusplus/filesystem-ts)
* [N3505:Filesystem Library Proposal(Revision 4)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3505.html)
* [RapperswilθΎΤκ­°εα§εα®λμ®θΑψ](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4080.html)

## νϋ®νϊ„

C++μθΊΜε¦«εβ¤εγΜε¦«εγεα«εγΚε¤£εβ¤εβΉλσΊζ½ΨλΜ¤θΑ¤εΆ°εβ¤εγ³εβΏεγΚε¤©εγΌεβΉεβΔθ½πθΐΦε΅ωεβ¶ε€‚

## μ¨¤κ¦

* C++εα§εβΉεβ―εγεγΞε¥θεα®εβ°ε΅ζεακ°²ηεα§ξ©»μ¦Ίθ€§εα®ς­Πε΅δεγΚε¤£εβ¤εγ«λσΊζ½Ψε£ςπ£Έε΅θεβ¶ε£θεα¬εΆ­εαε£λεΰ‚
    * νοΎεγΐε¦ΎεβΈεγ§εγ³εα®C++εα―εγ®ε¤¥εγ¬εβ―εγ°ε¦¬λσΊζ½ΨεΆ¬εα©εβΔθ½πθΐΦε΅χεα¦εα¨εΆ¬εα¨ε€‚
* Boostεγ©εβ¤εγΜε¦«εγεβΔε¥ωεγΌεβΉεα«εαε£λεΰ¤ε΅βεβ¶ι¨¶ηΊ¦εα―[VC](http://msdn.microsoft.com/en-us/library/hh874694.aspx)εα«κ°ήκ£ε΅υεβΈεΆ¨εα¨ε£λεΰ‚

## Boost Filesystemεα®εα¨εα®ραΚε΅δ

* Boostεα―εγΚε¤£εβ¤εγ«ιπΊεΆ¬εα©εα«charιώ¶εΆ°λφ®η­Ξη―χεβΔζ½Ώεα¬ε€¤ζ»ΜεΆ°εβ¨εγ³εβ³εγΌεγ®ε¤¥εγ³εβ°εα―codecvtεβΔζ½Ώεα¬ε€‚
* εαΖεΆ°εγ©εβ¤εγΜε¦«εγεα§εα―localeεβΔζ½Ώεα¬ε€¤εΆΐεαέ¶TF-8εβΔε¤·εγΪε¦Ύεγ°ε΅ωεβ¶ε€¤ε΅σεα΅εβ²εΆ°λφΉεαΈζΎΏιθ©εα§κ°ήιΘνϊ¨εΆΆεβΊε΅ζεΰ‚

## εγΒε¤»εα®εγ®ε¤Έεβ¤εγ³

* κΐΖθΪ§εα®narrow characterεβΔθ²³εα«OρφΆθΑ¤εΆ°C/C++εγ©εβ¤εγΜε¦«εγεβΔθ³¨λδΎθ·±εαΎη½φεβ΄κΎΌεβ€κΑκ¦Άε΅μεα¤ε£λεΰ‚
    * POSIXεαεβ±Δharιώ‹, Windowsεα―charιώ¶ε£ςwideιώ¶εΆ­κ¦²θ½ϋεαΞεΆ¨εα¨ε£λεΰ‚
* θ½΄εΆΐεα§εα®εα«μΌ€πΈ³εαΞεΆ¨εβ¶ζΊΊεα―εαΪεΆ°εαΎεαΎθΏΏεα¨εΆ΅εα¨εΆ±εαΤε€‚
* ξ©»μ¦Ίθ€§εα®ιυΎλ΅ΈεΆ­ιϋ°εα£εα¦εβ¶ζΊΊεα―char16_tεβ§Δhar32_tεβ§¶TF-8εβΔζ½Ώεα¨εΆ΅εα¨εΆΆεβΊε΅ζεΰ‚

## ντ¨π¬

* ξ·¶κ±ΎεγΒε¤» : εαΪε£μθ½¥κ¦ΜεΆ°λγη ±εαεαΞεΆ­εγΚε¤£εβ¤εγ«εα®θΏΊι½®εβΔι²»κ°ΤεΆ©εαΊε£λλγη ±
* μ―£π¨Ύε¥ρεβΉ : εβ·εγ³εγΨε¦¬εγ¦ε¤±εγεγ³εβ―εβ„.εβ„..εβΔηΐ­εαΎεαεα¨ιµ¶κ±ΎεγΒε¤»
* εγ®ε¤¥εγ¬εβ―εγ°ε¦¬ : εγΚε¤£εβ¤εγ«εβ¨ζ»ΜεΆ°εγ®ε¤¥εγ¬εβ―εγ°ε¦¬εβ¨εγ³εγ°ε¦¬λγη ±εβΔηΐ­εβ€εα¶εΆ°εβ°ε΅ζεα«λμ―εβ¶εΆΐεα¬ε¥υεβ΅εβ¤εγ«
* εγΚε¤£εβ¤εγ« : εγ¦εγΌεβ¶εβ¨ε¤ΉεβΉεγ¬ε¦Άεγ®ε¦ΎεβΏεβΔζΏΪθ·αεαε£λεγΚε¤£εβ¤εγ«εβ·εβΉεγ¬ε¦Άεα®θΊ­εα«εα¤ε£λκ±Ύπ³΅νι©
π¬­εβΖεΆΆεβ΄θΦΊεα¨εΆ΅εβ΄εΆ©εαΊε£λεΰ¤ε΅υεαΎεαΜεΆΐεακ³άθ€§εβΔθ·αεα¤εΰ‚
* εγΚε¤£εβ¤εγ«εβ·εβΉεγ¬ε¦Ά : εγΚε¤£εβ¤εγ«εα¨εαΪε£μεβ²εΆ°κ³άθ€§εα®ρϋ¬ηΏθ
* π¦®θΚ²εα®εβΉεγ¬εγ¦ε¥ιεβ¨ε¥χεγ­εβ»εβΉεαΈηΏμλω¤εΆ­ιπΈε΅ψκ±Ύπ³΅νι©εβΔη¤²θΦ¶εαε£λεα¨εγ¬εγΌεβΉεα«εαεβ‹
* εγΚε¤£εβ¤εγ«ιπ : εγΚε¤£εβ¤εγ«εα®ιπΊη±ν .εβ„..εα―νιΉιθ¥εαλδΎηΒµεβΔθ·αεα¤εΰ¤θ¬΅εα®εβ¤εΆ°εα―OSθΐΪη­
    * εγΚε¤£εβ¤εγ«ιπΊεΆ­θΏΏεα°ε£λλφ®η­—
    * θΏΏεα°ε£λεγΚε¤£εβ¤εγ«ιπ
    * νιΉιθ¥εαεγΚε¤£εβ¤εγ«ιπ
    * κ¦§λφ®η­Ξη°ΎθΛηκ―Ξε£ςιμΊιθ¥εαε£λεα¶ε΅χεαεα¨ε΅λ
    * εγΚε¤£εβ¤εγ«εα®ιώ¶ε€Άε¥ηεβ£εγ¬εβ―εγ°ε¦¬εΰΆεΆ¬εα©νιΉιθ¥εαεγ«εγΌεγ«
* εγεγ³εβ― : εγΚε¤£εβ¤εγ«ιπΊεΆ­ρφΆρΰ£εα¥εαΒε£ιεβΈεΆ΅εγ®ε¤¥εγ¬εβ―εγ°ε¦¬εβ¨εγ³εγ°ε¦¬
* nativeεβ¨εγ³εβ³εγΌεγ®ε¤¥εγ³εβ°
* NTCTS(Null-Terminated Character-Type Sequenceεα®νυ¥)
* OSθΐΪη­
* π¨εγ®ε¤¥εγ¬εβ―εγ°ε¦¬ : εα¤ε£λεγ®ε¤¥εγ¬εβ―εγ°ε¦¬εα«κ±ΎεαΞεΆ¨εΰΆε΅ύεβΈε£ςιπ«εβ€εγ®ε¤¥εγ¬εβ―εγ°ε¦¬ ..εα§λμ®ε΅χξ¦Ίεα™
.εβ„..εα«εα―ρα©ντ¨εαΚε£μεαεα„
* εγΒε¤» : (εγ«εγΌεγ°ηΏν)_opt (εγ«εγΌεγ°ε¥ηεβ£εγ¬εβ―εγ°ε¦¬)_opt εγΚε¤£εβ¤εγ«ιπΊεΆ°ιθ—
* εγΒε¤»ιπΊη―ζλώ?(pathname resolution) OSθΐΪη­
see [POSIX : Pathname Resolution](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap04.html#tag_04_11)

# π¨Άζ»¶
char, wchar_t, char16_t, char32_tεβΓΖncodedλφ®η­ΞηΫλεα¨εα¨ε΅ζ(signed charεβ§Φnsigned charεα―ιε¥εβ²εΆ¬εα„)εΰ‚
templateεγΒε¦«εγ΅εγΌεβΏεα®charTεα―εαΖε£μεβ²εΆ°εα¬εΆ£εα®εα©εβΈε΅λεα§εα¤ε£λεΰ‚

# εγΠε¥γεγ€εγΚε¤£εβ¤εγ«<filesystem>

θΊ»εαεβ―εγ©εβΉεβ¨θ§¶λ€ θΏ“
```
namespace std { namespace tbd { namespace filesystem {
    class path;
    class filesystem_error;
    class directory_entry;
    class directory_iterator;
    class recursiev_directory_iterator;
    class file_type;
    class perms;
    class file_status;
    struct space_info;
    enum class copy_options;
    enum class directory_options;
    file_time_type;
}}}
```
θΊ»εαρφΆλυ°
μ°¬εΆ«εα®ρφΆλυ°εα―εβ¨εγ©εγΌεβ³εγΌεγ±Ζrror_code ecεβΔκΏΘε΅ωεγΐε¦ΎεβΈεγ§εγ³εα¨θΐ¶η¤Με£ςλκΚε΅ςεβ¶ε¥πεγΌεβΈεγ§εγ³εα®2ξ®ς£άε΅μντ¨λδΎε΅υεβΈε£λεΰ‚

* θΐ¶η¤Με¥πεγΌεβΈεγ§εγ³ : void copy(const path& from, const path& to);
* εβ¨εγ©εγΌεβΔκΏΘε΅ωεγΐε¦ΎεβΈεγ§εγ³ : void copy(const path& from, const path& to,error_code& ec) noexcept;

```
path absolute(const path& p, const path& base=current_path());
path canonical(const path& p, const path& base = current_path());
void copy(const path& from, const path& to);
bool copy_file(const path& from, const path& to);
void copy_symlink(const path& existing_symlink,const path& new_symlink);
bool create_directories(const path& p);
bool create_directory(const path& p);
void create_directory_symlink(const path& to,const path& new_symlink);
void create_hard_link(const path& to, const path& new_hard_link);
void create_symlink(const path& to, const path& new_symlink);
path current_path();
void current_path(const path& p);
bool exists(file_status s) noexcept;
bool exists(const path& p);
bool equivalent(const path& p1, const path& p2);
uintmax_t file_size(const path& p);
uintmax_t hard_link_count(const path& p);
bool is_block_file(file_status s) noexcept;
bool is_block_file(const path& p);
bool is_character_file(file_status s) noexcept;
bool is_character_file(const path& p);
bool is_directory(file_status s) noexcept;
bool is_directory(const path& p);
bool is_empty(const path& p);
bool is_fifo(file_status s) noexcept;
bool is_fifo(const path& p);
bool is_other(file_status s) noexcept;
bool is_other(const path& p);
bool is_regular_file(file_status s) noexcept;
bool is_regular_file(const path& p);
bool is_socket(file_status s) noexcept;
bool is_socket(const path& p);
bool is_symlink(file_status s) noexcept;
bool is_symlink(const path& p);
file_time_type last_write_time(const path& p);
void last_write_time(const path& p, file_time_type new_time);
path read_symlink(const path& p);
bool remove(const path& p);
uintmax_t remove_all(const path& p);
void rename(const path& from, const path& to);
void resize_file(const path& p, uintmax_t size);
space_info space(const path& p);
file_status status(const path& p);
bool status_known(file_status s) noexcept;
file_status symlink_status(const path& p);
path system_complete(const path& p);
path temp_directory_path();
path unique_path(const path& model="%%%%-%%%%-%%%%-%%%%");
```

# class path
class pathεα―εγΒε¤»ιπΊε£ςπ£¨εαε¤±εγ©εβΉεΰ‚
εαΪεΆ°εγΒε¤»εαΈη®ήλΣϋεα«κ―ΠηΨεαε£λεα¶ε¥ρεβΉιπΊε΅μvalidεα§εα¤ε£λκΑκ¦ΆεΆ±εαεα¨ε€‚
```
namespace std { namespace tbd { namespace filesystem {

class path {
public:
    typedef see below value_type;
    typedef basic_string<value_type> string_type;
    static constexpr value_type preferred_separator = see below;
    ...
private:
    string_type pathname; // exposition only
};
}}}
```
value_typeεα―OSεαΈη®ήλΣϋεα«θΏΏεα«Ζncodedλφ®η­ΞηΫλεΰ‚
POSIXεαεβ±Χalue_type=charεα§preferred_separator=/εΰ‚
Windowsεαεβ±Χalue_type=wchar_tεα§preferred_separator=\εΰ‚

## pathιπ

```
pathname:
  root-name root-directory_opt relative-path_opt
  root-directory relative-path_opt
  relative-path
```

* root-name : ξ·¶κ±ΎεγΒε¤»εβΔκ΅¨εαΡ°SθΐΪη­ΠεΆ°π―Πη°§κ―ΐε£ςλμ®ε΅ωιπΊη±νεΰ‚
εαήεΆεα°εΆ²c:εα¨εαµ½\εα¨εα¶ε€‚

```
root-directory:
  directory-separator

relative-path:
    filename
    relative-path directory-separator
    relative-path directory-separator filename

filename:
    name
    dot
    dot-dot

name:
    directory-sepratorθ½¥κ¦ΜεΆ°OSθΐΪη­ΠεΆ°λφ®η­ΞεΆ°ιθ—

dot : .
dot-dot : ..
slash : /

directory-separator:
    slash
    slash directory-separator
    preferred-separator
    preferred-separator directory-separator

preferred-separator:
    OSθΐΪη­ΠεΆ°εγ®ε¤¥εγ¬εβ―εγ°ε¦¬εβ»εγΒε¦®εγΌεβΏεΰ£Τlashεα®ιπΈθ§οπ¬άε€‚
```
* ρΰ£ξΈΤε΅ωεβ¶κ¤®θΚ²εα®directory-separatorεα―θΊ€εα¤εα®directory-separatorεα¨π¨¶εΆ¬εαε€‚
* .εα¨εα¨ε΅ζεγΚε¤£εβ¤εγ«ιπΊεΆ±εβ«εγ¬εγ³εγ°ε¥ηεβ£εγ¬εβ―εγ°ε¦¬εβΔι¤Ίεαε€‚
* ..εα―π¨εγ®ε¤¥εγ¬εβ―εγ°ε¦¬εβΔι¤Ίεαε€‚
* νιΉκ°ΤεΆ°OSεα«εα¨εα£εα¦νιΉιθ¥εαλδΎηΒµεβΔθ·αεα¤νιΉιθ¥εα®εγΚε¤£εβ¤εγ«ιπΊε΅μεα¤εΆ¥εα¦εβ°ε΅δεΰ‚
